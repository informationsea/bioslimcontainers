# THIS FILE IS AUTOMATICALLY GENERATED. DO NOT EDIT BY HAND
# template file is make
FROM alpine:3.9 AS download
RUN apk add curl libarchive-tools
RUN curl -OL http://hgdownload.soe.ucsc.edu/admin/exe/userApps.v377.src.tgz
RUN bsdtar xf userApps.v377.src.tgz

FROM alpine:3.9 AS buildenv
RUN apk add gcc make libc-dev zlib-dev libpng-dev mariadb-dev mariadb-client bash
COPY --from=download /userApps /userApps
WORKDIR /userApps

RUN make -j4
RUN install -D -t /dest//usr/bin bwa
RUN install -D -t /dest//usr/share/man/man1 bwa.1


FROM alpine:3.9
RUN apk add bash zlib libpng mariadb-client bash
COPY --from=buildenv /dest /
ADD run.sh /run.sh
ENTRYPOINT [ "/bin/bash", "/run.sh" ]
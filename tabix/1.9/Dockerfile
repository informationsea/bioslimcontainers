# THIS FILE IS AUTOMATICALLY GENERATED. DO NOT EDIT BY HAND
# template file is autotools
FROM alpine:3.9 AS download
RUN apk add curl libarchive-tools
RUN curl -OL https://github.com/samtools/htslib/releases/download/1.9/htslib-1.9.tar.bz2
RUN bsdtar xf htslib-1.9.tar.bz2

FROM alpine:3.9 AS buildenv
RUN apk add gcc make libc-dev ncurses-dev bzip2-dev zlib-dev curl-dev curl xz-dev
COPY --from=download /htslib-1.9 /htslib-1.9
WORKDIR /htslib-1.9

RUN ./configure --prefix=/usr
RUN make -j4
RUN make install DESTDIR=/dest

FROM alpine:3.9
RUN apk add bash ncurses libbz2 zlib libcurl xz-libs
COPY --from=buildenv /dest /

ADD run.sh /run.sh
ENTRYPOINT [ "/bin/bash", "/run.sh" ]
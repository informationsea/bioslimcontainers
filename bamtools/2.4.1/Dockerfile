# THIS FILE IS AUTOMATICALLY GENERATED. DO NOT EDIT BY HAND
# template file is cmake
FROM alpine:3.9 AS download
RUN apk add curl libarchive-tools
RUN curl -OL https://github.com/pezmaster31/bamtools/archive/v2.4.1.tar.gz
RUN bsdtar xf v2.4.1.tar.gz

FROM alpine:3.9 AS buildenv
RUN apk add gcc g++ make libc-dev zlib-dev cmake
COPY --from=download /bamtools-2.4.1 /bamtools-2.4.1
WORKDIR /bamtools-2.4.1

RUN mkdir build
WORKDIR /bamtools-2.4.1/build
RUN cmake ..
RUN make -j4
RUN make install DESTDIR=/dest

FROM alpine:3.9
RUN apk add bash zlib libstdc++
COPY --from=buildenv /dest /

ADD run.sh /run.sh
ENTRYPOINT [ "/bin/bash", "/run.sh" ]
# THIS FILE IS AUTOMATICALLY GENERATED. DO NOT EDIT BY HAND
# template file is make
FROM alpine:3.9 AS download
RUN apk add curl libarchive-tools
RUN curl -OL https://downloads.sourceforge.net/project/bio-bwa/bwa-0.7.13.tar.bz2
RUN bsdtar xf bwa-0.7.13.tar.bz2

FROM alpine:3.9 AS buildenv
RUN apk add gcc make libc-dev zlib-dev patch
COPY --from=download /bwa-0.7.13 /bwa-0.7.13
WORKDIR /bwa-0.7.13
COPY patch-1.patch /
RUN patch -p1 < /patch-1.patch

RUN make -j4
RUN install -D -t /dest//usr/bin bwa
RUN install -D -t /dest//usr/share/man/man1 bwa.1


FROM alpine:3.9
RUN apk add bash zlib
COPY --from=buildenv /dest /
ADD run.sh /run.sh
ENTRYPOINT [ "/bin/bash", "/run.sh" ]